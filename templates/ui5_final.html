<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–∞–¥–∞–Ω–∏–π</title>
  <script src="https://cdn.tailwindcss.com"></script>
<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        neonPink: '#FF7F83',
        neonBlue: '#00FFE9',
        deepPurple: '#2700F6',
        brightYellow: '#FFA249',
        softIndigo: '#9E00F6'
      },
      borderRadius: {
        '3xl': '1.5rem',
        '4xl': '2rem'
      },
      boxShadow: {
        'neon': '0 4px 30px rgba(0, 255, 233, 0.5)',
        'inner-card': 'inset 0 1px 2px rgba(255, 255, 255, 0.1)',
        'soft': '0 10px 20px rgba(0, 0, 0, 0.1)'
      }
    }
  }
}
</script>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Fredoka', sans-serif; }
    .fade-in {
      animation: fadeIn 1s ease-in-out;
    }
    @keyframes fadeIn {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    .bg-decor-light {
      background: url('/static/layer1.jpg') no-repeat center center fixed;
      background-size: cover;
    }
    .bg-decor-dark {
      background: url('/static/layer1.jpg') no-repeat center center fixed;
      background-size: cover;
    }
    .sparkle {
    position: relative;
    animation: sparkle-glow 2s infinite ease-in-out;
    box-shadow: 0 0 8px 4px rgba(255, 215, 0, 0.7); /* —Å–≤–µ—Ç–ª–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ */
    overflow: hidden;
  }

  .sparkle::before, .sparkle::after {
    content: '‚ú®';
    position: absolute;
    animation: sparkle 1s ease-out forwards;
    opacity: 0;
  }

  .sparkle::before {
    top: -10px;
    left: 10px;
  }

  .sparkle::after {
    bottom: -10px;
    right: 10px;
  }


  @keyframes sparkle {
    0% { transform: scale(0); opacity: 0; }
    50% { transform: scale(1.5); opacity: 1; }
    100% { transform: scale(0); opacity: 0; }
  }

  @keyframes sparkle-glow {
    0% { box-shadow: 0 0 5px hsl(202, 87%, 57%); }
    50% { box-shadow: 0 0 15px rgb(255, 38, 0); }
    100% { box-shadow: 0 0 5px rgba(0, 26, 255, 0.906); }
  }
  </style>
</head>
<body id="mainBody" class="min-h-screen flex transition-colors duration-300 bg-gradient-to-tr from-deepPurple via-softIndigo to-neonBlue">
  <!-- Sidebar -->
  {% include 'sidebar.html' %}


  <!-- Main Content -->
  <div class="flex-1 flex flex-col items-center py-10 px-4">


  <div id="loadingScreen" class="hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
    <div class="bg-white p-8 rounded-2xl shadow-lg text-center text-xl font-semibold">
      ‚è≥ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–¥–∞–Ω–∏—è...
    </div>
  </div>

  <div id="mainCard" class="bg-white/80 backdrop-blur-xl shadow-soft rounded-4xl p-10 w-full max-w-5xl fade-in relative text-gray-800">
    <button onclick="toggleDark()" class="absolute top-4 right-4 bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded-full text-sm">üåì –¢–µ–º–∞</button>
    <h1 class="text-4xl font-bold text-center mb-6">Cambridge Exam Task Generator</h1>
    <p class="text-center text-lg mb-8">–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —É—Ä–æ–≤–Ω—è, —Ä–∞–∑–¥–µ–ª–∞ –∏ —Ç–µ–º—ã</p>

    


<!-- Task Types Block -->
<div class="mb-12">
  <h3 class="text-2xl font-semibold mb-6">üóÉÔ∏è –¢–∏–ø—ã –∑–∞–¥–∞–Ω–∏–π</h3>
  <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
    <div class="p-4 rounded-3xl shadow-soft bg-white text-center">
      <div class="text-4xl">üìù</div>
      <h4 class="font-semibold">Essay</h4>
      <p class="text-sm">–ê—Ä–≥—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç</p>
      <button class="mt-2 bg-neonPink text-white px-4 py-1 rounded-full shadow-neon">–í—ã–±—Ä–∞—Ç—å</button>
    </div>
    <div class="p-4 rounded-3xl shadow-soft bg-white text-center">
      <div class="text-4xl">üì®</div>
      <h4 class="font-semibold">Email</h4>
      <p class="text-sm">–§–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ</p>
      <button class="mt-2 bg-neonPink text-white px-4 py-1 rounded-full shadow-neon">–í—ã–±—Ä–∞—Ç—å</button>
    </div>
    <div class="p-4 rounded-3xl shadow-soft bg-white text-center">
      <div class="text-4xl">üé§</div>
      <h4 class="font-semibold">Interview</h4>
      <p class="text-sm">–õ–∏—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã</p>
      <button class="mt-2 bg-neonPink text-white px-4 py-1 rounded-full shadow-neon">–í—ã–±—Ä–∞—Ç—å</button>
    </div>
    <div class="p-4 rounded-3xl shadow-soft bg-white text-center">
      <div class="text-4xl">üîç</div>
      <h4 class="font-semibold">Multiple Choice</h4>
      <p class="text-sm">–í—ã–±–æ—Ä –æ—Ç–≤–µ—Ç–æ–≤</p>
      <button class="mt-2 bg-neonPink text-white px-4 py-1 rounded-full shadow-neon">–í—ã–±—Ä–∞—Ç—å</button>
    </div>
  </div>
</div>

<!-- Random Task Generation Button -->
<div class="text-center mb-12">
  <button class="bg-gradient-to-r from-brightYellow to-neonPink text-white py-3 px-6 rounded-3xl shadow-neon font-semibold hover:scale-105 transition">
    ‚ö° –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ª—É—á–∞–π–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ
  </button>
</div>
<form method="POST" class="space-y-6" onsubmit="showLoading()">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="mb-6">
          <p class="mb-2 text-white font-medium">–í—ã–±–µ—Ä–∏ –º–æ–¥–µ–ª—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</p>
          <div class="grid grid-cols-2 gap-4" id="model-cards">
            <label class="cursor-pointer bg-gradient-to-r from-purple-500 to-pink-500 p-4 rounded-xl shadow-md text-white text-center">
              <input type="radio" name="model" value="gpt" class="hidden" checked>
              <div class="text-lg font-semibold">GPT-4</div>
            </label>
            <label class="cursor-pointer bg-gradient-to-r from-blue-500 to-cyan-500 p-4 rounded-xl shadow-md text-white text-center">
              <input type="radio" name="model" value="claude-sonnet" class="hidden">
              <div class="text-lg font-semibold">Claude 3 Sonnet</div>
            </label>
            <label class="cursor-pointer bg-gradient-to-r from-amber-500 to-rose-500 p-4 rounded-xl shadow-md text-white text-center">
              <input type="radio" name="model" value="deepseek" class="hidden">
              <div class="text-lg font-semibold">DeepSeek</div>
            </label>
            <label class="cursor-pointer bg-gradient-to-r from-purple-500 to-indigo-600 p-4 rounded-xl shadow-md text-white text-center">
              <input type="radio" name="model" value="gemma" class="hidden">
              <div class="text-lg font-semibold">Gemma</div>
            </label>
            
            
          </div>
        </div>
        
        <div>
          <label for="level" class="block text-sm font-medium">–£—Ä–æ–≤–µ–Ω—å</label>
          <select id="level" name="level" class="mt-1 w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
            <option>A2</option>
            <option>B1</option>
            <option value="FCE">FCE</option>
            <option value="CAE">CAE</option>
            <option value="CPE">CPE</option>
          </select>
        </div>

        <div>
          <label for="section" class="block text-sm font-medium">–†–∞–∑–¥–µ–ª —ç–∫–∑–∞–º–µ–Ω–∞</label>
          <select id="section" name="section" onchange="updateSubtypes()" class="mt-1 w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
            <option value="Writing">Writing</option>
            <option value="Reading">Reading</option>
            <option value="Use of English">Use of English</option>
            <option value="Speaking">Speaking</option>
          </select>
        </div>

        <div class="md:col-span-2">
          <label for="subtype" class="block text-sm font-medium">–¢–∏–ø –∑–∞–¥–∞–Ω–∏—è</label>
          <select id="subtype" name="task_type" class="mt-1 w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
            <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
          </select>
        </div>

        <div class="md:col-span-2">
          <label for="topic" class="block text-sm font-medium">–¢–µ–º–∞—Ç–∏–∫–∞</label>
          <textarea id="topic" name="topic" rows="2" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: Technology and communication"
            class="mt-1 w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500"></textarea>
        </div>
      </div>
      
      
      <button type="submit"
        class="w-full bg-gradient-to-r from-neonPink to-deepPurple text-white py-3 px-6 rounded-3xl text-lg font-semibold transition shadow-neon hover:scale-105">
        –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ
      </button>
    </form>
  
    {% if result %}
      <div class="mt-10 bg-gray-100 p-6 rounded-xl shadow-inner whitespace-pre-wrap text-lg leading-relaxed fade-in">
        {{ result }}
      </div>

        {% if images %}
        <div class="mt-10">
          <h2 class="text-xl font-semibold mb-4">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</h2>
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            {% for img in images %}
              <div class="rounded-xl overflow-hidden shadow-lg bg-white p-2">
                <img src="{{ img }}" alt="AI image" class="rounded-md w-full object-cover shadow">
                <p class="text-sm text-center text-gray-600 mt-2">Generated from prompt</p>
              </div>
            {% endfor %}
          </div>
        </div>
      {% endif %}
    {% else %}
    <p class="text-center mt-10 fade-in">–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏...</p>
    {% endif %}
  </div>

  <script>
    const subtypes = {
      Writing: [
        ["Essay", "–ê—Ä–≥—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç"],
        ["Email", "–§–æ—Ä–º–∞–ª—å–Ω—ã–µ –∏ –Ω–µ—Ñ–æ—Ä–º–∞–ª—å–Ω—ã–µ –ø–∏—Å—å–º–∞"],
        ["Report", "–û–ø–∏—Å–∞–Ω–∏–µ/–∞–Ω–∞–ª–∏–∑ —Å–∏—Ç—É–∞—Ü–∏–∏ + —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏"],
        ["Review", "–û—Ç–∑—ã–≤ –Ω–∞ —Ñ–∏–ª—å–º/–∫–Ω–∏–≥—É/–º–µ—Å—Ç–æ"],
        ["Article", "–ù–µ—Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç –≤ –±–ª–æ–≥/–∂—É—Ä–Ω–∞–ª"],
        ["Story", "–ö—Ä–∞—Ç–∫–∏–π —Ä–∞—Å—Å–∫–∞–∑"],
        ["Letter", "–ü–∏—Å—å–º–æ –Ω–∞ –Ω—É–∂–Ω—É—é —Ç–µ–º—É"]
      ],
      Reading: [
        ["Multiple Choice", "8 –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ —Ç–µ–∫—Å—Ç—É"],
        ["Gapped Text", "–í—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è"],
        ["Multiple Matching", "–°–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å –∞–±–∑–∞—Ü—ã —Å —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è–º–∏"]
      ],
      Speaking: [
        ["Interview", "–û—Ç–≤–µ—Ç—ã –Ω–∞ –ª–∏—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã"],
        ["Long Turn", "–ú–æ–Ω–æ–ª–æ–≥ –ø–æ –∫–∞—Ä—Ç–∏–Ω–∫–µ –∏–ª–∏ —Ç–µ–º–µ"],
        ["Collaborative Task", "–î–∏–∞–ª–æ–≥ —Å –¥—Ä—É–≥–∏–º –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–º"],
        ["Discussion", "–ú–Ω–µ–Ω–∏–µ –∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ç–µ–º–µ"]
      ],
      Use_of_English: [
        ["Open Cloze", "–ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞ –±–µ–∑ –ø–æ–¥—Å–∫–∞–∑–æ–∫"],
        ["Word Formation", "–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —Å–ª–æ–≤–æ"],
        ["Key Word Transformations", "–ü–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ"],
        ["Multiple-choice Cloze", "12 –ø—Ä–æ–ø—É—Å–∫–æ–≤ —Å –≤—ã–±–æ—Ä–æ–º –æ—Ç–≤–µ—Ç–∞"]
      ],
    };

    function updateSubtypes() {
      const section = document.getElementById("section").value.replace(/\s+/g, "_");
      const subtypeSelect = document.getElementById("subtype");
      subtypeSelect.innerHTML = "";
      subtypes[section].forEach(([value, label]) => {
        const option = document.createElement("option");
        option.value = value;
        option.textContent = `${value} ‚Äî ${label}`;
        subtypeSelect.appendChild(option);
      });
    }

    function toggleDark() {
      const body = document.getElementById("mainBody");
      const card = document.getElementById("mainCard");
      if (body.classList.contains("bg-decor-light")) {
        body.classList.remove("bg-decor-light");
        body.classList.add("bg-decor-dark");
        card.classList.remove("bg-white", "text-gray-800");
        card.classList.add("bg-gray-900", "text-white");
      } else {
        body.classList.remove("bg-decor-dark");
        body.classList.add("bg-decor-light");
        card.classList.remove("bg-gray-900", "text-white");
        card.classList.add("bg-white", "text-gray-800");
      }
    }

    function showLoading() {
      document.getElementById("loadingScreen").classList.remove("hidden");
    }

    updateSubtypes();
  </script>
  <script>
    const modelCards = document.querySelectorAll('#model-cards label');
  
    modelCards.forEach(card => {
      card.addEventListener('click', () => {
        modelCards.forEach(c => c.classList.remove('ring-4', 'ring-white', 'sparkle'));
        card.classList.add('ring-4', 'ring-white', 'sparkle');
  
        // –£–¥–∞–ª–∏–º sparkle —á–µ—Ä–µ–∑ —Å–µ–∫—É–Ω–¥—É, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –≤—ã–±—Ä–∞—Ç—å —Ç—É –∂–µ –º–æ–¥–µ–ª—å –µ—â—ë —Ä–∞–∑
        //setTimeout(() => card.classList.remove('sparkle'), 1000);
      });
    });
  </script>
  </div> <!-- –ó–∞–∫—Ä—ã–≤–∞–µ—Ç flex-1 -->

</body>
</html>

