<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Cambridge Exam Task Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after {
      box-sizing: border-box;
    }
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #26096c, #240439, #2a3d93);
      background-size: 400% 400%;
      animation: gradient 15s ease infinite;
    }

    @keyframes gradient {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }
    .glass {
      background: rgba(255, 255, 255, 0.06);
      backdrop-filter: blur(14px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 1.5rem;
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
    }
    select, textarea {
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.15);
      color: #fff;
    }
    select:focus, textarea:focus {
      outline: none;
      box-shadow: 0 0 0 2px #a78bfa;
      border-color: #a78bfa;
    }
    .neon-button {
      background: linear-gradient(90deg, #8b5cf6, #ec4899);
      color: white;
      font-weight: bold;
      padding: 0.75rem 1.5rem;
      border-radius: 9999px;
      box-shadow: 0 0 15px #c084fc;
      transition: transform 0.2s ease;
    }
    .neon-button:hover {
      transform: scale(1.05);
    }
    .model-opt {
      background: rgba(255,255,255,0.12);
      padding: 0.75rem 1rem;
      border-radius: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      border: 1px solid transparent;
      color: white;
    }
    .model-opt.active, .model-opt:hover {
      border-color: #a78bfa;
      background: rgba(168, 139, 250, 0.3);
      box-shadow: 0 0 10px #a78bfa88;
    }
    .model-opt span {
      font-weight: 600;
    }
     select, textarea {
    color: white;
    background-color: rgba(255, 255, 255, 0.08);
  }

  select option {
    background-color: rgba(26, 22, 50, 0.95); /* —Ç–µ–º–Ω—ã–π —Ñ–æ–Ω */
    color: white;
  }

  select:focus, textarea:focus {
    outline: none;
    box-shadow: 0 0 0 2px #a78bfa;
    border-color: #a78bfa;
  }
  select, textarea {
  color: white !important;
}
.task-card {
  flex: 0 0 calc((100% - 3rem) / 4);  /* 4 –∫–∞—Ä—Ç–æ—á–∫–∏ + 3 –ø—Ä–æ–º–µ–∂—É—Ç–∫–∞ –ø–æ 1rem */
  margin-right: 1rem;                 /* –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –º–µ–∂–¥—É –Ω–∏–º–∏ */
  border-radius: 1rem;
  padding: 1.25rem;
  backdrop-filter: blur(10px);
  box-shadow: 0 0 10px rgba(255,255,255,0.08);
  transition: transform .3s ease;
}
.task-card:last-child {
  margin-right: 0;
}
.slider-container {
    position: relative;
    overflow: hidden;
    width: 100%;
    max-width: 100%; /* —Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ–º –Ω–∞ –≤—Å—é –¥–æ—Å—Ç—É–ø–Ω—É—é —à–∏—Ä–∏–Ω—É */
    margin: 0 auto;
  }
.slider-container {
  overflow: hidden;
  position: relative;
}
  .slider {
    display: flex;
    transition: transform .5s ease;
  }
  .slider-container {
    
    position: relative;
  }
  #task-slider {
  padding-bottom: 2rem;
}

.task-card {
  margin-bottom: 1rem;
}
.task-card .icon {
  width: 32px;              /* —à–∏—Ä–∏–Ω–∞ */
  height: 32px;             /* –≤—ã—Å–æ—Ç–∞ */
  object-fit: contain;      /* —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ */
  margin-bottom: 0.75rem;   /* –æ—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É –ø–µ—Ä–µ–¥ <h2> */
  filter: brightness(0) invert(1); /* –¥–µ–ª–∞–µ–º —á–µ—Ä–Ω—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É –±–µ–ª–æ–π */
}
  .spinner {
    border: 4px solid rgba(255,255,255,0.2);
    border-top: 4px solid white;
    border-radius: 50%;
    width: 2.5rem;
    height: 2.5rem;
    animation: spin 1s linear infinite;
  }
  @keyframes spin {
    to { transform: rotate(360deg); }
  }
 .model-btn {
    position: relative;
    display: block;
    padding: 0.75rem 1.25rem;
    color: white;
    font-weight: 500;
    border-radius: 0.75rem;
    border: 1px solid rgba(255, 255, 255, 0.1);
    background-color: rgba(255, 255, 255, 0.05);
    transition: all 0.3s ease;
  }
  .model-btn:hover {
    background-color: rgba(168, 85, 247, 0.5);
    box-shadow: 0 0 10px rgba(168, 85, 247, 0.6);
  }
  .model-btn input:checked ~ .model-name {
    color: #ec4899;
    font-weight: 600;
  }
  .model-btn input:checked {
    outline: 2px solid #ec4899;
  }
  .tooltip-card {
    display: none;
    position: absolute;
    top: 100%;
    margin-top: 0.75rem;
    z-index: 50;
    width: 16rem;
    padding: 1rem;
    font-size: 0.875rem;
    border-radius: 0.75rem;
    flex-direction: column;
    background: rgba(30, 30, 40, 0.85);
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.35);
    border: 1px solid rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(16px);
  }
  .group:hover .tooltip-card {
    display: flex;
  }
  @media (max-width: 768px) {
    .tooltip-card {
      display: none !important;
    }
  }

  


  </style>
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='logo.png') }}">

</head>
<body class="min-h-screen flex flex-row">
  {% include 'sidebar.html' %}
  <main class="flex-1 max-w-6xl mx-auto px-6 py-10 space-y-10">

  

    <div class="text-center text-white">
      <h1 class="text-4xl md:text-5xl font-extrabold">Cambridge Exam<br><span class="text-purple-400">Task Generator</span></h1>
      <p class="text-base text-white/70 mt-2">–°–æ–∑–¥–∞–≤–∞–π –∑–∞–¥–∞–Ω–∏—è FCE / CAE / CPE </p>
    </div>

    


    <!-- –§–æ—Ä–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ -->
    <form method="POST" class="glass p-8 space-y-8" onsubmit="showLoading()">
    <!--<input type="hidden" name="model" id="modelInput" value="gpt">-->
      <!-- –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ -->
<div class="bg-white/5 rounded-3xl p-6">
  <h2 class="text-white font-bold text-lg mb-4">–í—ã–±–µ—Ä–∏ –º–æ–¥–µ–ª—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</h2>
  <div class="flex flex-wrap gap-4">
        <!-- GPT-4 -->
    <label class="relative group block p-4 bg-white/5 border border-white/10 rounded-2xl hover:bg-white/10 transition-all text-white peer-checked:ring-2 peer-checked:ring-purple-400 peer-checked:bg-purple-700/40 peer-checked:shadow-xl">
    <input type="radio" name="model" value="gpt" class="peer hidden" />
    <div class="flex items-center gap-2">
      <span>GPT-4</span>
      <span class="text-yellow-400 text-sm">ü™ô</span>
    </div>
      <div class="tooltip-card">
        <div class="font-semibold text-pink-300 mb-1">GPT-4</div>
        <div class="text-yellow-300 mb-2">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
        <ul class="list-disc ml-4 space-y-1 text-white/90 text-left">
          <li>–û—Ç–ª–∏—á–Ω–æ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –ª—é–±—ã–º–∏ —Ç–∏–ø–∞–º–∏ –∑–∞–¥–∞–Ω–∏–π</li>
          <li>–ü–æ–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É Cambridge-—ç–∫–∑–∞–º–µ–Ω–æ–≤</li>
          <li><span class="text-yellow-400">ü™ô –ü–ª–∞—Ç–Ω–∞—è –º–æ–¥–µ–ª—å</span></li>
        </ul>
      </div>
    </label>

    <!-- Claude 3 Sonnet -->
    <label class="relative group block p-4 bg-white/5 border border-white/10 rounded-2xl hover:bg-white/10 transition-all text-white">
      <input type="radio" name="model" value="claude" class="peer hidden" />
      <div class="flex items-center gap-2">
        <span>Claude 3 Sonnet</span>
        <span class="text-yellow-400 text-sm">ü™ô</span>
      </div>
      <div class="tooltip-card">
        <div class="font-semibold text-orange-300 mb-1">Claude 3 Sonnet</div>
        <div class="text-yellow-300 mb-2">‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ</div>
        <ul class="list-disc ml-4 space-y-1 text-white/90 text-left">
          <li>–ü–∏—à–µ—Ç —Ç–µ–∫—Å—Ç—ã, –ø–æ—Ö–æ–∂–∏–µ –Ω–∞ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–µ</li>
          <li>–ß–∞—Å—Ç–æ –¥–∞—ë—Ç –ª–æ–≥–∏—á–Ω—ã–µ –∏ –ø–æ–Ω—è—Ç–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏</li>
          <li><span class="text-yellow-400">ü™ô –ü–ª–∞—Ç–Ω–∞—è –º–æ–¥–µ–ª—å</span></li>
        </ul>
      </div>
    </label>

    <!-- ChatGPT-4o -->
    <label class="relative group block p-4 bg-white/5 border border-white/10 rounded-2xl hover:bg-white/10 transition-all text-white">
      <input type="radio" name="model" value="gpt-4o" class="peer hidden" />
      <div class="flex items-center gap-2">
        <span>GPT-4o</span>
        <span class="text-yellow-400 text-sm">ü™ô</span>
      </div>
      <div class="tooltip-card">
        <div class="font-semibold text-blue-300 mb-1">ChatGPT-4o</div>
        <div class="text-yellow-300 mb-2">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
        <ul class="list-disc ml-4 space-y-1 text-white/90 text-left">
          <li>–ë—ã—Å—Ç—Ä–∞—è –∏ —Ç–æ—á–Ω–∞—è –º–æ–¥–µ–ª—å</li>
          <li>–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤—Å–µ—Ö —Å–µ–∫—Ü–∏–π —ç–∫–∑–∞–º–µ–Ω–∞</li>
          <li><span class="text-yellow-400">ü™ô –ü–ª–∞—Ç–Ω–∞—è –º–æ–¥–µ–ª—å</span></li>
        </ul>
      </div>
    </label>

    <!-- DeepSeek -->
    <label class="relative group block p-4 bg-white/5 border border-white/10 rounded-2xl hover:bg-white/10 transition-all text-white">
      <input type="radio" name="model" value="deepseek" class="peer hidden" />
      <div class="flex items-center gap-2">
        <span>DeepSeek</span>
      </div>
      <div class="tooltip-card">
        <div class="font-semibold text-cyan-300 mb-1">DeepSeek</div>
        <div class="text-yellow-300 mb-2">‚≠ê‚≠ê‚≠ê‚òÜ</div>
        <ul class="list-disc ml-4 space-y-1 text-white/90 text-left">
          <li>–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ GPT</li>
          <li>–•–æ—Ä–æ—à–æ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º</li>
          <li>–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –∑–∞–¥–∞–Ω–∏–π</li>
        </ul>
      </div>
    </label>

    <!-- Gemma -->
    <label class="relative group block p-4 bg-white/5 border border-white/10 rounded-2xl hover:bg-white/10 transition-all text-white">
      <input type="radio" name="model" value="gemma" class="peer hidden" />
      <div class="flex items-center gap-2">
        <span>Gemma</span>
      </div>
      <div class="tooltip-card">
        <div class="font-semibold text-gray-300 mb-1">Gemma</div>
        <div class="text-yellow-300 mb-2">‚≠ê‚≠ê‚òÜ‚òÜ‚òÜ</div>
        <ul class="list-disc ml-4 space-y-1 text-white/90 text-left">
          <li>–ë—ã—Å—Ç—Ä–∞—è –∏ –ª—ë–≥–∫–∞—è –º–æ–¥–µ–ª—å</li>
          <li>–ò–¥–µ–∞–ª—å–Ω–∞ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞–Ω–∏–π –∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</li>
          <li><span class="text-green-300">–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –º–æ–¥–µ–ª—å</span></li>
        </ul>
      </div>
    </label>



  </div>
</div>
      <div class="grid md:grid-cols-2 gap-6">
        <div>
          <label for="level" class="block mb-2 text-white font-semibold">–£—Ä–æ–≤–µ–Ω—å</label>
          <select id="level" name="level" class="w-full p-3 rounded-xl">
            <option value="FCE">FCE</option>
            <option value="CAE">CAE</option>
            <option value="CPE">CPE</option>
          </select>
        </div>
        <div>
          <label for="section" class="block mb-2 text-white font-semibold">–†–∞–∑–¥–µ–ª —ç–∫–∑–∞–º–µ–Ω–∞</label>
          <select id="section" name="section" onchange="updateSubtypes()" class="w-full p-3 rounded-xl">
            <option value="Writing">Writing</option>
            <option value="Reading">Reading</option>
            <option value="Use of English">Use of English</option>
            <option value="Speaking">Speaking</option>
          </select>
        </div>
        <div>
          <label for="subtype" class="block mb-2 text-white font-semibold">–¢–∏–ø –∑–∞–¥–∞–Ω–∏—è</label>
          <select id="subtype" name="task_type" class="w-full p-3 rounded-xl"></select>
        </div>
        <div>
          <label for="topic" class="block mb-2 text-white font-semibold">–¢–µ–º–∞—Ç–∏–∫–∞</label>
          <textarea id="topic" name="topic" rows="2" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: Technology and communication" class="w-full p-3 rounded-xl"></textarea>
        </div>
      </div>
      <div id="loading-spinner" class="flex justify-center mt-4 hidden">
        <div class="spinner"></div>
      </div>

      <button type="submit" class="neon-button w-full text-xl">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ</button>
      
    </form>
    <!-- –¢–∏–ø—ã –∑–∞–¥–∞–Ω–∏–π -->
<div class="mt-10 relative">
  <h2 class="text-white text-2xl font-bold mb-6">–¢–∏–ø—ã –∑–∞–¥–∞–Ω–∏–π</h2>

  <div class="slider-container relative overflow-hidden mx-auto" style="max-width:1088px;">

    <!-- Slider wrapper -->
    <div id="task-slider" class="slider flex transition-transform duration-500 pb-8">
      <div class="task-card bg-purple-900/30 text-white">
  <div>
    <img src="static\generated_images\icons\grammar_3838474.png" alt="book" class="icon">
    <h2 class="text-lg font-bold mb-1">Open Cloze</h2>
    <p class="text-sm opacity-80">–ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞ –±–µ–∑ –ø–æ–¥—Å–∫–∞–∑–æ–∫. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≥—Ä–∞–º–º–∞—Ç–∏–∫—É –∏ —É—Å—Ç–æ–π—á–∏–≤—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è.</p>
  </div>
  <div class="text-xs opacity-60 mt-2">–£—Ä–æ–≤–Ω–∏: FCE, CAE, CPE<br/>–°–ª–æ–∂–Ω–æ—Å—Ç—å: –±–æ–ª—å—à–µ –ø—Ä–æ–ø—É—Å–∫–æ–≤, –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–µ–µ –ª–µ–∫—Å–∏–∫–∞</div>
</div>
<div class="task-card bg-purple-900/30 text-white">
  <div>
    <img src="static\generated_images\icons\grammar_3838474.png" alt="book" class="icon">
    <h2 class="text-lg font-bold mb-1">Word Formation</h2>
    <p class="text-sm opacity-80">–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å–ª–æ–≤. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–Ω–∞–Ω–∏–µ —á–∞—Å—Ç–µ–π —Ä–µ—á–∏, —Å—É—Ñ—Ñ–∏–∫—Å–æ–≤, –ø—Ä–∏—Å—Ç–∞–≤–æ–∫.</p>
  </div>
  <div class="text-xs opacity-60 mt-2">–£—Ä–æ–≤–Ω–∏: FCE, CAE, CPE<br/>–§–æ—Ä–º—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–º–∏</div>
</div>
<div class="task-card bg-purple-900/30 text-white">
  <div>
    <img src="static\generated_images\icons\grammar_3838474.png" alt="book" class="icon">
    <h2 class="text-lg font-bold mb-1">Key Word Transformations</h2>
    <p class="text-sm opacity-80">–ü–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∏ –ø–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä–æ–≤–∞–Ω–∏–µ.</p>
  </div>
  <div class="text-xs opacity-60 mt-2">–£—Ä–æ–≤–Ω–∏: FCE, CAE, CPE<br/>–ü–æ–≤—ã—à–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π</div>
</div>
<div class="task-card bg-purple-900/30 text-white">
  <div>
    <img src="static\generated_images\icons\grammar_3838474.png" alt="book" class="icon">
    <h2 class="text-lg font-bold mb-1">Multiple-choice Cloze</h2>
    <p class="text-sm opacity-80">–í—ã–±–æ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Å–ª–æ–≤–∞. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–ª–æ–≤–∞—Ä–Ω—ã–π –∑–∞–ø–∞—Å, —Ñ—Ä–∞–∑–æ–≤—ã–µ –≥–ª–∞–≥–æ–ª—ã.</p>
  </div>
  <div class="text-xs opacity-60 mt-2">–£—Ä–æ–≤–Ω–∏: FCE, CAE<br/>–°–ª–æ–≤–∞—Ä–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Å–ª–æ–∂–Ω–µ–µ</div>
</div>
<div class="task-card bg-blue-900/30 text-white">
  <div>
    <img src="static\generated_images\icons\reading_15564277.png" alt="reader" class="icon">
    <h2 class="text-lg font-bold mb-1">Multiple Choice</h2>
    <p class="text-sm opacity-80">–í–æ–ø—Ä–æ—Å—ã –ø–æ —Å–º—ã—Å–ª—É —Ç–µ–∫—Å—Ç–∞. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π –∏ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤.</p>
  </div>
  <div class="text-xs opacity-60 mt-2">FCE, CAE, CPE<br/>–¢–µ–º—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–µ–µ</div>
</div>
<div class="task-card bg-blue-900/30 text-white">
  <div>
    <img src="static\generated_images\icons\reading_15564277.png" alt="reader" class="icon">
    <h2 class="text-lg font-bold mb-1">Gapped Text</h2>
    <p class="text-sm opacity-80">–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–≤—è–∑–Ω–æ—Å—Ç—å —Ç–µ–∫—Å—Ç–∞.</p>
  </div>
  <div class="text-xs opacity-60 mt-2">FCE, CAE, CPE<br/>–°–ª–æ–∂–Ω–æ—Å—Ç—å –≤–æ–∑—Ä–∞—Å—Ç–∞–µ—Ç —Å —É—Ä–æ–≤–Ω–µ–º</div>
</div>
<div class="task-card bg-blue-900/30 text-white">
  <div>
    <img src="static\generated_images\icons\reading_15564277.png" alt="reader" class="icon">
    <h2 class="text-lg font-bold mb-1">Multiple Matching</h2>
    <p class="text-sm opacity-80">–°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π —Å –∞–±–∑–∞—Ü–∞–º–∏. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è —Ç–µ–∫—Å—Ç–∞.</p>
  </div>
  <div class="text-xs opacity-60 mt-2">CAE, CPE<br/>–§–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ —Å–ª–æ–∂–Ω–µ–µ</div>
</div>
<div class="task-card bg-pink-900/30 text-white">
  <div>
    <img src="static\generated_images\icons\letter_9301462.png" alt="writing" class="icon">
    <h2 class="text-lg font-bold mb-1">Essay</h2>
    <p class="text-sm opacity-80">–ê—Ä–≥—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —ç—Å—Å–µ. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ü–∏—é, —Å—Ç–∏–ª—å.</p>
  </div>
  <div class="text-xs opacity-60 mt-2">FCE, CAE, CPE<br/>–ü–æ–≤—ã—à–∞–µ—Ç—Å—è –≥–ª—É–±–∏–Ω–∞ –∞–Ω–∞–ª–∏–∑–∞</div>
</div>
<div class="task-card bg-pink-900/30 text-white">
  <div>
    <img src="static\generated_images\icons\letter_9301462.png" alt="writing" class="icon">
    <h2 class="text-lg font-bold mb-1">Email / Letter</h2>
    <p class="text-sm opacity-80">–§–æ—Ä–º–∞–ª—å–Ω–æ–µ/–Ω–µ—Ñ–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–∏—Å—å–º–æ. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∏–ª—å, —Å—Ç—Ä—É–∫—Ç—É—Ä—É, —Ä–µ–≥–∏—Å—Ç—Ä.</p>
  </div>
  <div class="text-xs opacity-60 mt-2">FCE, CAE<br/>CAE —Ç—Ä–µ–±—É–µ—Ç —Å—Ç—Ä–æ–≥–∏–π —Å—Ç–∏–ª—å</div>
</div>
<div class="task-card bg-pink-900/30 text-white">
  <div>
    <img src="static\generated_images\icons\letter_9301462.png" alt="writing" class="icon">
    <h2 class="text-lg font-bold mb-1">Report</h2>
    <p class="text-sm opacity-80">–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –∏ —Ñ–æ—Ä–º–∞–ª—å–Ω–æ—Å—Ç—å.</p>
  </div>
  <div class="text-xs opacity-60 mt-2">CAE, CPE<br/>–ß—ë—Ç–∫–∞—è –ª–æ–≥–∏–∫–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞</div>
</div>
<div class="task-card bg-pink-900/30 text-white">
  <div>
    <img src="static\generated_images\icons\letter_9301462.png" alt="writing" class="icon">
    <h2 class="text-lg font-bold mb-1">Review</h2>
    <p class="text-sm opacity-80">–û–±–∑–æ—Ä —Ñ–∏–ª—å–º–∞/–∫–Ω–∏–≥–∏. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –º–Ω–µ–Ω–∏—è –∏ –Ω–µ—Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å.</p>
  </div>
  <div class="text-xs opacity-60 mt-2">FCE, CAE, CPE<br/>–†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –ª–µ–∫—Å–∏–∫–∏</div>
</div>
<div class="task-card bg-pink-900/30 text-white">
  <div>
    <img src="static\generated_images\icons\letter_9301462.png" alt="writing" class="icon">
    <h2 class="text-lg font-bold mb-1">Article</h2>
    <p class="text-sm opacity-80">–°—Ç–∞—Ç—å—è –¥–ª—è –∂—É—Ä–Ω–∞–ª–∞. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å, –∏–Ω—Ç–µ—Ä–µ—Å –¥–ª—è —á–∏—Ç–∞—Ç–µ–ª—è.</p>
  </div>
  <div class="text-xs opacity-60 mt-2">FCE, CAE<br/>–ë–æ–ª—å—à–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ CAE</div>
</div>
<div class="task-card bg-pink-900/30 text-white">
  <div>
    <img src="static\generated_images\icons\letter_9301462.png" alt="writing" class="icon">
    <h2 class="text-lg font-bold mb-1">Story</h2>
    <p class="text-sm opacity-80">–ö–æ—Ä–æ—Ç–∫–∏–π —Ä–∞—Å—Å–∫–∞–∑. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≥—Ä–∞–º–º–∞—Ç–∏–∫—É, –ª–æ–≥–∏–∫—É, –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ—Å—Ç—å.</p>
  </div>
  <div class="text-xs opacity-60 mt-2">FCE<br/>–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –Ω–∞ —É—Ä–æ–≤–Ω–µ B2</div>
</div>
<div class="task-card bg-indigo-900/30 text-white">
  <div>
    <img src="static\generated_images\icons\discussion_12069069.png" alt="speaking" class="icon">
    <h2 class="text-lg font-bold mb-1">Interview</h2>
    <p class="text-sm opacity-80">–õ–∏—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –±–µ–≥–ª–æ—Å—Ç—å, –ª–µ–∫—Å–∏—á–µ—Å–∫–∏–π –∑–∞–ø–∞—Å, —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å.</p>
  </div>
  <div class="text-xs opacity-60 mt-2">FCE, CAE, CPE<br/>–¢–µ–º—ã —É—Å–ª–æ–∂–Ω—è—é—Ç—Å—è</div>
</div>
<div class="task-card bg-indigo-900/30 text-white">
  <div>
    <img src="static\generated_images\icons\discussion_12069069.png" alt="speaking" class="icon">
    <h2 class="text-lg font-bold mb-1">Long Turn</h2>
    <p class="text-sm opacity-80">–ú–æ–Ω–æ–ª–æ–≥ –ø–æ –∫–∞—Ä—Ç–∏–Ω–∫–∞–º. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ, —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ, —É–º–µ–Ω–∏–µ –æ–±–æ–±—â–∞—Ç—å.</p>
  </div>
  <div class="text-xs opacity-60 mt-2">FCE: 2 —Ñ–æ—Ç–æ, CAE: 3, CPE: –¥–æ 5</div>
</div>
<div class="task-card bg-indigo-900/30 text-white">
  <div>
    <img src="static\generated_images\icons\discussion_12069069.png" alt="speaking" class="icon">
    <h2 class="text-lg font-bold mb-1">Collaborative Task</h2>
    <p class="text-sm opacity-80">–î–∏–∞–ª–æ–≥ —Å –ø–∞—Ä—Ç–Ω—ë—Ä–æ–º. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—É, —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ, –≤–µ–∂–ª–∏–≤–æ—Å—Ç—å.</p>
  </div>
  <div class="text-xs opacity-60 mt-2">–£—Ä–æ–≤–µ–Ω—å: –æ—Ç FCE –¥–æ CPE<br/>–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ–º</div>
</div>
<div class="task-card bg-indigo-900/30 text-white">
  <div>
    <img src="static\generated_images\icons\discussion_12069069.png" alt="speaking" class="icon">
    <h2 class="text-lg font-bold mb-1">Discussion</h2>
    <p class="text-sm opacity-80">–û–±—Å—É–∂–¥–µ–Ω–∏–µ —Å—É–∂–¥–µ–Ω–∏–π. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ü–∏—é, —Ä–µ–∞–∫—Ü–∏—é, —Å—Ç—Ä—É–∫—Ç—É—Ä—É.</p>
  </div>
  <div class="text-xs opacity-60 mt-2">FCE, CAE, CPE<br/>–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è —É—Ä–æ–≤–µ–Ω—å –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏</div>
</div>
</div> <!-- –∫–æ–Ω–µ—Ü slider -->
</div> 

     <!-- –°—Ç—Ä–µ–ª–∫–∏ -->
    <button id="prevBtn" class="absolute left-0 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 text-white rounded-full w-12 h-12 flex items-center justify-center z-20">
      ‚óÄ
    </button>
    <button id="nextBtn" class="absolute right-0 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-white/40 text-white rounded-full w-12 h-12 flex items-center justify-center z-20">
      ‚ñ∂
    </button>
  </div>
</div>

    {% if result %}
    <div id="result-block" class="glass p-6 text-white whitespace-pre-wrap leading-relaxed">
      {{ result }}
      {% if images %}
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6">
        {% for img in images %}
        <img src="{{ img }}" alt="AI image" class="rounded-xl shadow-md w-full object-cover">
        {% endfor %}
      </div>
      {% endif %}
      <div class="flex flex-wrap gap-4 mt-6">
        <a href="{{ url_for('taskgen.download_pdf') }}" class="bg-pink-600 text-white px-5 py-3 rounded-xl font-semibold shadow hover:scale-105 transition">üìÑ –°–∫–∞—á–∞—Ç—å PDF</a>
      </div>
    </div>
    {% else %}
    <p class="text-center text-white/60">–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏...</p>
    {% endif %}
  </main>

  <script>
    document.querySelectorAll('.model-opt').forEach(opt => {
      opt.addEventListener('click', function () {
        document.querySelectorAll('.model-opt').forEach(el => el.classList.remove('active'));
        opt.classList.add('active');
        const value = opt.querySelector('input').value;
        document.getElementById('modelInput').value = value;
      });
  
    });
    
  </script>

  


  <script>
    
    const subtypes = {
      Writing: [["Essay","–ê—Ä–≥—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç"],["Email","–§–æ—Ä–º–∞–ª—å–Ω—ã–µ –∏ –Ω–µ—Ñ–æ—Ä–º–∞–ª—å–Ω—ã–µ –ø–∏—Å—å–º–∞"],["Report","–û–ø–∏—Å–∞–Ω–∏–µ/–∞–Ω–∞–ª–∏–∑ —Å–∏—Ç—É–∞—Ü–∏–∏ + —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏"],["Review","–û—Ç–∑—ã–≤ –Ω–∞ —Ñ–∏–ª—å–º/–∫–Ω–∏–≥—É/–º–µ—Å—Ç–æ"],["Article","–ù–µ—Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç –≤ –±–ª–æ–≥/–∂—É—Ä–Ω–∞–ª"],["Story","–ö—Ä–∞—Ç–∫–∏–π —Ä–∞—Å—Å–∫–∞–∑"],["Letter","–ü–∏—Å—å–º–æ –Ω–∞ –Ω—É–∂–Ω—É—é —Ç–µ–º—É"]],
      Reading: [["Multiple Choice","8 –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ —Ç–µ–∫—Å—Ç—É"],["Gapped Text","–í—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è"],["Multiple Matching","–°–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å –∞–±–∑–∞—Ü—ã —Å —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è–º–∏"]],
      Speaking: [["Interview","–û—Ç–≤–µ—Ç—ã –Ω–∞ –ª–∏—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã"],["Long Turn","–ú–æ–Ω–æ–ª–æ–≥ –ø–æ –∫–∞—Ä—Ç–∏–Ω–∫–µ –∏–ª–∏ —Ç–µ–º–µ"],["Collaborative Task","–î–∏–∞–ª–æ–≥ —Å –¥—Ä—É–≥–∏–º –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–º"],["Discussion","–ú–Ω–µ–Ω–∏–µ –∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ç–µ–º–µ"]],
      Use_of_English: [["Open Cloze","–ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞ –±–µ–∑ –ø–æ–¥—Å–∫–∞–∑–æ–∫"],["Word Formation","–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —Å–ª–æ–≤–æ"],["Key Word Transformations","–ü–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ"],["Multiple-choice Cloze","12 –ø—Ä–æ–ø—É—Å–∫–æ–≤ —Å –≤—ã–±–æ—Ä–æ–º –æ—Ç–≤–µ—Ç–∞"]]
    };
    function updateSubtypes() {
      const section = document.getElementById("section").value.replace(/\s+/g, "_");
      const subtypeSelect = document.getElementById("subtype");
      subtypeSelect.innerHTML = "";
      subtypes[section].forEach(([value, label]) => {
        const option = document.createElement("option");
        option.value = value;
        option.textContent = `${value} ‚Äî ${label}`;
        subtypeSelect.appendChild(option);
      });
    }
    updateSubtypes();

    function getTaskText() {
      const el = document.getElementById('result-block');
      return el ? el.innerText.trim() : '';
    }
    document.getElementById('share-tg')?.addEventListener('click', function() {
      const text = encodeURIComponent(getTaskText());
      const url = `https://t.me/share/url?url=&text=${text}`;
      this.setAttribute('href', url);
    });
    document.getElementById('share-wa')?.addEventListener('click', function() {
      const text = encodeURIComponent(getTaskText());
      const url = `https://wa.me/?text=${text}`;
      this.setAttribute('href', url);
    });
    document.getElementById("download-pdf-btn")?.addEventListener("click", function () {
      const element = document.getElementById('result-block');
      html2pdf().from(element).set({
        margin: 0.5,
        filename: 'exam_task.pdf',
        html2canvas: { scale: 2, useCORS: true },
        jsPDF: { orientation: 'portrait', unit: 'in', format: 'a4', compressPDF: true }
      }).save();
    });
  </script>
<script>
  const slider = document.getElementById("task-slider");
  const originals = Array.from(slider.children);
  const N = originals.length;    // —Ä–µ–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ –∫–∞—Ä—Ç–æ—á–µ–∫
  const V = 4;                   // –≤–∏–¥–∏–º—ã—Ö –∫–∞—Ä—Ç–æ—á–∫–∏

  // 1) –∫–ª–æ–Ω–∏—Ä—É–µ–º: —Å–Ω–∞—á–∞–ª–∞ ¬´–∫–æ–Ω–µ—Ü¬ª ‚Üí –≤ –Ω–∞—á–∞–ª–æ, –ø–æ—Ç–æ–º ¬´–Ω–∞—á–∞–ª–æ¬ª ‚Üí –≤ –∫–æ–Ω–µ—Ü
  originals.slice(-N).forEach(card => {
    const c = card.cloneNode(true);
    c.classList.add("clone");
    slider.insertBefore(c, slider.firstChild);
  });
  originals.forEach(card => {
    const c = card.cloneNode(true);
    c.classList.add("clone");
    slider.appendChild(c);
  });

  // –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ–º –∏—Ç–æ–≥–æ–≤—ã–π –º–∞—Å—Å–∏–≤ –∫–∞—Ä—Ç–æ—á–µ–∫
  const cards = slider.querySelectorAll(".task-card");
  const style = getComputedStyle(cards[0]);
  let cardWidth = cards[0].offsetWidth + parseFloat(style.marginRight);

  // —Å—Ç–∞—Ä—Ç–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å = N (–ø–µ—Ä–≤—ã–µ N –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω—ã –≤ –Ω–∞—á–∞–ª–æ)
  let idx = N;
  slider.style.transform = `translateX(-${idx * cardWidth}px)`;

  // —Å–±—Ä–æ—Å –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ ¬´–∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—É—é¬ª –∑–æ–Ω—É
  slider.addEventListener("transitionend", () => {
    slider.style.transition = "none";

    // –µ—Å–ª–∏ —É–µ—Ö–∞–ª–∏ –≤ –Ω–∞—á–∞–ª–æ (–∫–ª–æ–Ω—ã —Å –∫–æ–Ω—Ü–∞)
    if (idx < N) {
      idx += N;
    }
    // –µ—Å–ª–∏ —É–µ—Ö–∞–ª–∏ –≤ –∫–æ–Ω–µ—Ü (–∫–ª–æ–Ω—ã —Å –Ω–∞—á–∞–ª–∞)
    else if (idx >= N * 2) {
      idx -= N;
    }

    slider.style.transform = `translateX(-${idx * cardWidth}px)`;
    // —Ñ–æ—Ä—Å-reflow –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
    slider.offsetHeight;
    slider.style.transition = "transform .5s ease";
  });

  // –∫–Ω–æ–ø–∫–∏ ‚Üê ‚Üí 
  document.getElementById("nextBtn").addEventListener("click", () => {
    idx++;
    slider.style.transition = "transform .5s ease";
    slider.style.transform = `translateX(-${idx * cardWidth}px)`;
  });
  document.getElementById("prevBtn").addEventListener("click", () => {
    idx--;
    slider.style.transition = "transform .5s ease";
    slider.style.transform = `translateX(-${idx * cardWidth}px)`;
  });

  // –ø—Ä–∏ —Ä–µ—Å–∞–π–∑–µ –ø–µ—Ä–µ—Å—á–∏—Ç–∞–µ–º —à–∏—Ä–∏–Ω—É –∫–∞—Ä—Ç–æ—á–∫–∏
  window.addEventListener("resize", () => {
    const st = getComputedStyle(cards[0]);
    cardWidth = cards[0].offsetWidth + parseFloat(st.marginRight);
    slider.style.transition = "none";
    slider.style.transform = `translateX(-${idx * cardWidth}px)`;
    slider.offsetHeight;
    slider.style.transition = "transform .5s ease";
  });
</script>
<script>
  const btn = document.querySelector('button[type="submit"]');
  const form = document.querySelector('form');

  form.addEventListener('submit', function (e) {
    e.preventDefault();

    // –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏–Ω–Ω–µ—Ä —Å—Ä–∞–∑—É
    document.getElementById('loading-spinner').classList.remove('hidden');

    btn.disabled = true;
    btn.innerHTML = "‚è≥ –ü–æ–¥–æ–∂–¥–∏—Ç–µ...";

    // –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–æ—Ä–º—É —á–µ—Ä–µ–∑ fetch (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –Ω–µ –±–ª–æ–∫–∏—Ä—É—è DOM)
    fetch("/", {
      method: "POST",
      body: new FormData(form)
    })
    .then(response => response.text())
    .then(html => {
      document.open();
      document.write(html);
      document.close();
    })
    .catch(err => {
      alert("–û—à–∏–±–∫–∞: " + err);
      btn.disabled = false;
      btn.innerHTML = "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ";
      document.getElementById('loading-spinner').classList.add('hidden');
    });
  });
</script>


</body>
</html>



